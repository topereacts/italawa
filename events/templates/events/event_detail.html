{% extends "events/layout.html" %}
{% load static %}

{% block body %}
<div class="p-3" id="eventDetail" data-event-id="{{ event.id }}">

    <h1>{{ event.name }}</h1>
    <p>{{ event.description }}</p>
    <img src="{{ event.poster.url }}" alt="{{ event.name }}">

  
  <!-- Fixed Footer -->
    <footer class="fixed-bottom bg-light text-center">
        <button class="btn btn-success" id="openModal">GET A TICKET</button>
    </footer>
  <!-- Modal structure -->
  <div class="modal fade" id="ticketModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Tickets</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="paymentForm">
            <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
            <div class="modal-body" id="ticketContainer">
            <!-- Ticket cards will be populated here -->
            </div>
                <div class="mb-3">
                    <label for="fullName" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="fullName" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" required>
                </div>
                <div class="modal-footer">
                    <div>
                        <p>Subtotal: ₦<span id="subtotal">0</span></p>
                        <p>Tax/VAT: ₦<span id="tax">0</span></p>
                        <p>Total: ₦<span id="total">0</span></p>
                    </div>
                    <input type="hidden" id="ticket-id" value="{{ ticket.id }}">
                    <input type="hidden" id="quantity" value="{{ quantity }}">
                    <button type="submit" class="btn btn-primary" id="checkoutButton" onclick="payWithPaystack()">Checkout</button>
                </div>
        </form>
      </div>
    </div>
  </div>

</div>
{% block script %}
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="{% static 'events/script.js' %}"></script>
{% endblock %}

{% endblock %}
